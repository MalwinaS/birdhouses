(function(){"use strict";var t={951:function(t,e,a){var i=a(9963),o=a(2201),r=a(6252);function n(t,e,a,i,o,n){const s=(0,r.up)("products-table");return(0,r.wg)(),(0,r.j4)(s)}var s=a(3577);function l(t,e,a,o,n,l){const d=(0,r.up)("base-button"),c=(0,r.up)("base-card");return(0,r.wg)(),(0,r.j4)(c,null,{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>n.searchTerm=t),placeholder:"Search..."},null,512),[[i.nr,n.searchTerm]])]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.currencies,((t,e)=>((0,r.wg)(),(0,r.j4)(d,{key:e,onClick:e=>l.changeCurrency(t)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t),1)])),_:2},1032,["onClick"])))),128))]),(0,r._)("table",null,[(0,r._)("tr",null,[(0,r._)("th",{onClick:e[1]||(e[1]=t=>l.sortList("name"))},"Nazwa ↕"),(0,r._)("th",{onClick:e[2]||(e[2]=t=>l.sortList("description"))},"Opis ↕"),(0,r._)("th",{onClick:e[3]||(e[3]=t=>l.sortList("price"))},"Cena ↕"),(0,r._)("th",{onClick:e[4]||(e[4]=t=>l.sortList("currency"))},"Waluta inna ↕"),(0,r._)("th",{onClick:e[5]||(e[5]=t=>l.sortList("category"))},"Kategoria ↕"),(0,r._)("th",{onClick:e[6]||(e[6]=t=>l.sortList("animal"))},"Zwierzęta ↕")]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredProducts,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,s.zw)(t.name),1),(0,r._)("td",null,(0,s.zw)(t.description),1),(0,r._)("td",null,(0,s.zw)(t.price)+" PLN",1),(0,r._)("td",null,(0,s.zw)(l.formatPrice(t.price)),1),(0,r._)("td",null,(0,s.zw)(t.category),1),(0,r._)("td",null,(0,s.zw)(t.animal),1)])))),128))])])),_:1})}var d={data(){return{sortedData:[],sortedbyASC:!0,searchTerm:"",currency:"EUR",currencies:["USD","EUR","GBP"],conversionRates:{}}},provide(){return{productlist:this.products,addProduct:this.addProduct}},computed:{tableData(){return this.$store.getters["products/products"]},filteredProducts(){return this.searchTerm?this.tableData.filter((t=>{const e=Number(this.searchTerm),a=Number(t.price);return isNaN(e)?t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.description.toLowerCase().includes(this.searchTerm.toLowerCase())||t.category.toLowerCase().includes(this.searchTerm.toLowerCase())||t.animal.toLowerCase().includes(this.searchTerm.toLowerCase()):a===e})):this.tableData},hasProducts(){return this.$store.getters["products/hasProducts"]}},mounted(){this.sortedData=this.filteredProducts,this.getConversionRates()},methods:{sortList(t){this.sortedbyASC?(this.tableData.sort(((e,a)=>e[t]>a[t]?-1:1)),this.sortedbyASC=!1):(this.tableData.sort(((e,a)=>e[t]<a[t]?-1:1)),this.sortedbyASC=!0)},async getConversionRates(){const t=await fetch("https://api.exchangerate-api.com/v4/latest/pln"),e=await t.json();this.conversionRates=e.rates},changeCurrency(t){this.currency=t,this.getConversionRates()},formatPrice(t){const e=t*this.conversionRates[this.currency];return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency}).format(e)}}},c=a(3744);const u=(0,c.Z)(d,[["render",l],["__scopeId","data-v-e0e6dc7a"]]);var m=u,p={components:{ProductsTable:m},created(){this.loadProducts()},methods:{loadProducts(){this.$store.dispatch("products/loadProducts")}}};const h=(0,c.Z)(p,[["render",n]]);var v=h;function f(t,e,a,i,o,n){const s=(0,r.up)("add-product");return(0,r.wg)(),(0,r.j4)(s)}const w=(0,r._)("h2",null,"Wprowadź nowy produkt",-1);function y(t,e,a,i,o,n){const s=(0,r.up)("product-form"),l=(0,r.up)("base-card");return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[w,(0,r.Wm)(s,{onSaveData:n.saveData},null,8,["onSaveData"])])),_:1})])}const g=t=>((0,r.dD)("data-v-bed32d0c"),t=t(),(0,r.Cn)(),t),_=g((()=>(0,r._)("label",{for:"name"},"Nazwa",-1))),b={key:0},k=g((()=>(0,r._)("label",{for:"description"},"Opis",-1))),V={key:0},C=g((()=>(0,r._)("label",{for:"price"},"Cena",-1))),D={key:0},I=g((()=>(0,r._)("h3",null,"Domki",-1))),z=g((()=>(0,r._)("option",{value:"drzewo",id:"tree"},"Na drzewo",-1))),P=g((()=>(0,r._)("option",{value:"ziemia",id:"ground"},"Na ziemię",-1))),A=[z,P],j={key:0},U=g((()=>(0,r._)("h3",null,"Zwierzęta",-1))),$=["value"],W={key:0},L={key:1};function S(t,e,a,o,n,l){const d=(0,r.up)("base-button");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:e[9]||(e[9]=(0,i.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,r._)("div",{class:(0,s.C_)(["form-control",{invalid:!n.name.isValid}])},[_,(0,r.wy)((0,r._)("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>n.name.val=t),onBlur:e[1]||(e[1]=t=>l.clearValidity("name"))},null,544),[[i.nr,n.name.val,void 0,{trim:!0}]]),n.name.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",b,"Pole nie może być puste"))],2),(0,r._)("div",{class:(0,s.C_)(["form-control",{invalid:!n.description.isValid}])},[k,(0,r.wy)((0,r._)("textarea",{type:"text",id:"description",rows:"5","onUpdate:modelValue":e[2]||(e[2]=t=>n.description.val=t),onBlur:e[3]||(e[3]=t=>l.clearValidity("description"))},null,544),[[i.nr,n.description.val,void 0,{trim:!0}]]),n.description.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",V,"Opis nie może być pusty"))],2),(0,r._)("div",{class:(0,s.C_)(["form-control",{invalid:!n.price.isValid}])},[C,(0,r.wy)((0,r._)("input",{type:"number",id:"price","onUpdate:modelValue":e[4]||(e[4]=t=>n.price.val=t),onBlur:e[5]||(e[5]=t=>l.clearValidity("price"))},null,544),[[i.nr,n.price.val,void 0,{number:!0}]]),n.price.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",D,"Uzupełnij wartość"))],2),(0,r._)("div",{class:(0,s.C_)(["form-control",{invalid:!n.category.isValid}])},[I,(0,r._)("div",null,[(0,r.wy)((0,r._)("select",{name:"houses",id:"houses","onUpdate:modelValue":e[6]||(e[6]=t=>n.category.val=t),onBlur:e[7]||(e[7]=t=>l.clearValidity("category"))},A,544),[[i.bM,n.category.val]])]),n.category.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",j))],2),U,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredAnimal,((t,a)=>((0,r.wg)(),(0,r.iD)("div",{key:a},[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=t=>n.checkedAnimals=t),value:t.animal},null,8,$),[[i.e8,n.checkedAnimals]]),(0,r.Uk)((0,s.zw)(t.animal),1)])))),128)),n.animal.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",W)),n.formIsValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",L,"Proszę, wypełnij wszystkie pola")),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Zapisz")])),_:1})],32)}var T={emits:["save-data"],name:"product-form",data(){return{name:{val:"",isValid:!0},description:{val:"",isValid:!0},price:{val:null,isValid:!0},category:{val:[],isValid:!0},animal:{val:null,isValid:!0},checkedAnimals:[],formIsValid:!0}},computed:{filteredAnimal(){return this.$store.getters["animals/animal"]}},created(){this.loadAnimals()},methods:{loadAnimals(){this.$store.dispatch("animals/loadAnimals")},clearValidity(t){this[t].isValid=!0},validateForm(){this.formIsValid=!0,""===this.name.val&&(this.name.isValid=!1,this.formIsValid=!1),""===this.description.val&&(this.description.isValid=!1,this.formIsValid=!1),(!this.price.val||this.price.val<0)&&(this.price.isValid=!1,this.formIsValid=!1),0===this.category.val.length&&(this.category.isValid=!1,this.formIsValid=!1),0===this.checkedAnimals.length&&(this.animal.isValid=!1,this.formIsValid=!1)},submitForm(){if(this.validateForm(),!this.formIsValid)return;const t={name:this.name.val,description:this.description.val,price:this.price.val,category:this.category.val,animal:this.checkedAnimals.toString()};this.$emit("save-data",t)}}};const Z=(0,c.Z)(T,[["render",S],["__scopeId","data-v-bed32d0c"]]);var O=Z,F={components:{ProductForm:O},methods:{saveData(t){this.$store.dispatch("products/addProduct",t),this.$router.replace("/birdhouses/"),this.loadProducts()},loadProducts(){this.$store.dispatch("products/loadProducts")}},created(){this.loadProducts()}};const x=(0,c.Z)(F,[["render",y]]);var N=x,q={components:{AddProduct:N}};const R=(0,c.Z)(q,[["render",f]]);var B=R;function H(t,e,a,i,o,n){const s=(0,r.up)("add-category");return(0,r.wg)(),(0,r.j4)(s)}const K=(0,r._)("h2",null,"Wprowadź nową kategorię - zwierzęta",-1);function M(t,e,a,i,o,n){const s=(0,r.up)("category-form"),l=(0,r.up)("base-card");return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[K,(0,r.Wm)(s,{onSaveAnimal:n.saveAnimal},null,8,["onSaveAnimal"])])),_:1})])}const Y=t=>((0,r.dD)("data-v-5435625e"),t=t(),(0,r.Cn)(),t),E=Y((()=>(0,r._)("label",{for:"animal"},"Nazwa kategorii",-1))),G={key:0};function J(t,e,a,o,n,l){const d=(0,r.up)("base-button"),c=(0,r.up)("base-card");return(0,r.wg)(),(0,r.j4)(c,null,{default:(0,r.w5)((()=>[(0,r._)("form",{onSubmit:e[2]||(e[2]=(0,i.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,r._)("div",{class:(0,s.C_)(["form-control",{invalid:!n.animal.isValid}])},[E,(0,r.wy)((0,r._)("input",{type:"text",id:"animal","onUpdate:modelValue":e[0]||(e[0]=t=>n.animal.val=t),onBlur:e[1]||(e[1]=t=>l.clearValidity("animal"))},null,544),[[i.nr,n.animal.val,void 0,{trim:!0}]]),n.animal.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",G,"Pole nie może być puste"))],2),(0,r.Wm)(d,{onClick:t.saveAnimal},{default:(0,r.w5)((()=>[(0,r.Uk)("Zapisz")])),_:1},8,["onClick"])],32)])),_:1})}var Q={emits:["save-animal"],name:"product-form",data(){return{animal:{val:"",isValid:!0},formIsValid:!0}},methods:{clearValidity(t){this[t].isValid=!0},validateForm(){this.formIsValid=!0,0===this.animal.val.length&&(this.animal.isValid=!1,this.formIsValid=!1)},submitForm(){if(this.validateForm(),!this.formIsValid)return;const t={animal:this.animal.val};this.$emit("save-animal",t)}}};const X=(0,c.Z)(Q,[["render",J],["__scopeId","data-v-5435625e"]]);var tt=X,et={components:{CategoryForm:tt},methods:{saveAnimal(t){this.$store.dispatch("animals/addAnimal",t),this.$router.replace("/new-product/"),this.loadAnimals()},loadAnimals(){this.$store.dispatch("animals/loadAnimals")}},created(){this.loadAnimals()}};const at=(0,c.Z)(et,[["render",M]]);var it=at,ot={components:{AddCategory:it}};const rt=(0,c.Z)(ot,[["render",H]]);var nt=rt;const st=(0,o.p7)({history:(0,o.PO)(),routes:[{path:"/",redirect:"/birdhouses/"},{path:"/birdhouses/",component:v},{path:"/new-product/",component:B},{path:"/new-category/",component:nt}]});var lt=st,dt=a(3907),ct=(a(7658),{addProduct(t,e){t.products.push(e)},setProducts(t,e){t.products=e}}),ut={async addProduct(t,e){const a=(new Date).getTime(),i={name:e.name,description:e.description,price:e.price,category:e.category,animal:e.animal},o=await fetch(`https://animalhouses-cc0e5-default-rtdb.firebaseio.com/products/${a}.json`,{method:"PUT",body:JSON.stringify(i)});o.ok,t.commit("setProducts",{...i,id:a})},async loadProducts(t){const e=t.rootGetters.productId,a=await fetch("https://animalhouses-cc0e5-default-rtdb.firebaseio.com/products.json"),i=await a.json();a.ok;const o=[];for(const r in i)if(null!==i[r]){const t={id:r,productId:e,name:i[r].name,description:i[r].description,price:i[r].price,category:i[r].category,animal:i[r].animal};o.push(t)}t.commit("setProducts",o)}},mt={products(t){return t.products},hasProducts(t){return t.products&&t.products.length>0}},pt={namespaced:!0,state(){return{products:[{id:"1",name:"Domek dla ptaków",category:"drzewo",animal:"ptaki",description:"Idealny domek dla ptaków do zawieszenia na drzewie",price:200},{id:"2",name:"Domek dla kotów",category:"ziemia",animal:"kot",description:"Idealny domek dla kotów do zamontowania na ziemi",price:130},{id:"3",name:"Domek dla ptaków",category:"drzewo",animal:"ptaki",description:"Idealny domek dla ptaków do zamontowania na ziemi - mały",price:50}]}},mutations:ct,actions:ut,getters:mt},ht={addAnimal(t,e){t.animal.push(e)},setAnimals(t,e){t.animal=e}},vt={async addAnimal(t,e){const a=(new Date).getTime(),i={animal:e.animal},o=await fetch(`https://animalhouses-cc0e5-default-rtdb.firebaseio.com/animal/${a}.json`,{method:"PUT",body:JSON.stringify(i)});o.ok,t.commit("setAnimals",{...i,id:a})},async loadAnimals(t){const e=t.rootGetters.animalId,a=await fetch("https://animalhouses-cc0e5-default-rtdb.firebaseio.com/animal.json"),i=await a.json();a.ok;const o=[];for(const r in i)if(null!==i[r]){const t={id:r,animalId:e,animal:i[r].animal};o.push(t)}t.commit("setAnimals",o)}},ft={animal(t){return t.animal}},wt={namespaced:!0,state(){return{animal:[{id:"1",animal:"kot"},{id:"2",animal:"ptak"}]}},mutations:ht,actions:vt,getters:ft};const yt=(0,dt.MT)({modules:{products:pt,animals:wt},state(){return{productId:"1",animalId:"2"}},getters:{productId(t){return t.productId},animalId(t){return t.animalId}}});var gt=yt;function _t(t,e,a,i,o,n){const s=(0,r.up)("the-header"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),(0,r.Wm)(l)],64)}function bt(t,e){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("header",null,[(0,r._)("nav",null,[(0,r._)("h1",null,[(0,r.Wm)(a,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Domki dla zwierząt")])),_:1})]),(0,r._)("ul",null,[(0,r._)("li",null,[(0,r.Wm)(a,{to:"/birdhouses"},{default:(0,r.w5)((()=>[(0,r.Uk)("Lista produktów")])),_:1})]),(0,r._)("li",null,[(0,r.Wm)(a,{to:"/new-product"},{default:(0,r.w5)((()=>[(0,r.Uk)("Dodaj produkt")])),_:1})]),(0,r._)("li",null,[(0,r.Wm)(a,{to:"/new-category"},{default:(0,r.w5)((()=>[(0,r.Uk)("Dodaj kategorię")])),_:1})])])])])}const kt={},Vt=(0,c.Z)(kt,[["render",bt],["__scopeId","data-v-67984421"]]);var Ct=Vt,Dt={components:{TheHeader:Ct}};const It=(0,c.Z)(Dt,[["render",_t]]);var zt=It;const Pt={class:"card"};function At(t,e){return(0,r.wg)(),(0,r.iD)("div",Pt,[(0,r.WI)(t.$slots,"default",{},void 0,!0)])}const jt={},Ut=(0,c.Z)(jt,[["render",At],["__scopeId","data-v-3d9ad41c"]]);var $t=Ut;function Wt(t,e,a,i,o,n){const l=(0,r.up)("router-link");return a.link?((0,r.wg)(),(0,r.j4)(l,{key:1,to:a.toLink,class:(0,s.C_)(a.mode)},{default:(0,r.w5)((()=>[(0,r.WI)(t.$slots,"default",{},void 0,!0)])),_:3},8,["to","class"])):((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,s.C_)(a.mode)},[(0,r.WI)(t.$slots,"default",{},void 0,!0)],2))}var Lt={props:{mode:{type:String,required:!1,default:null},link:{type:Boolean,required:!1,default:!1},toLink:{type:String,required:!1,default:"/"}}};const St=(0,c.Z)(Lt,[["render",Wt],["__scopeId","data-v-459fdeab"]]);var Tt=St;function Zt(t,e,a,i,o,n){return(0,r.wg)(),(0,r.iD)("span",{class:(0,s.C_)(["badge",a.type])},(0,s.zw)(n.text),3)}var Ot={props:["type","title"],computed:{text(){return this.title.toUpperCase()}}};const Ft=(0,c.Z)(Ot,[["render",Zt],["__scopeId","data-v-95e82c84"]]);var xt=Ft;const Nt={open:""};function qt(t,e,a,i,o,n){const l=(0,r.up)("base-button");return(0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[(0,r._)("div",{onClick:e[0]||(e[0]=e=>t.$emit("close"))}),(0,r._)("dialog",Nt,[(0,r._)("header",null,[(0,r.WI)(t.$slots,"header",{},(()=>[(0,r._)("h2",null,(0,s.zw)(a.title),1)]),!0)]),(0,r._)("section",null,[(0,r.WI)(t.$slots,"default",{},void 0,!0)]),(0,r._)("menu",null,[(0,r.WI)(t.$slots,"actions",{},(()=>[(0,r.Wm)(l,{onClick:e[1]||(e[1]=e=>t.$emit("close"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Close")])),_:1})]),!0)])])])}var Rt={props:{title:{type:String,required:!1}},emits:["close"]};const Bt=(0,c.Z)(Rt,[["render",qt],["__scopeId","data-v-24ec0009"]]);var Ht=Bt;const Kt=(0,i.ri)(zt);Kt.use(lt),Kt.use(gt),Kt.component("base-card",$t),Kt.component("base-button",Tt),Kt.component("base-badge",xt),Kt.component("base-dialog",Ht),Kt.mount("#app")}},e={};function a(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,i,o,r){if(!i){var n=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],r=t[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(s=!1,r<n&&(n=r));if(s){t.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,o,r]}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,r,n=i[0],s=i[1],l=i[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(l)var c=l(a)}for(e&&e(i);d<n.length;d++)r=n[d],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},i=self["webpackChunkbirdhouses"]=self["webpackChunkbirdhouses"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(951)}));i=a.O(i)})();
//# sourceMappingURL=app.8e350b82.js.map